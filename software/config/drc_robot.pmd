group "1.robot" {
    cmd "pserver" {
        exec = "bot-param-server drc_robot.cfg";
        host = "$HOSTNAME_ROBOT";
    }
    cmd "roscore" {
        exec = "roscore";
        host = "$HOSTNAME_ROBOT";
    }
    cmd "viewer" {
        exec = "drc-viewer";
        host = "$HOSTNAME_ROBOT";
    }
    cmd "modelpub" {
        exec = "robot_model_publisher -u $HOME/drc/software/models/mit_gazebo_models/mit_robot_PnC/model.urdf";
        host = "$HOSTNAME_ROBOT";
    }
    cmd "estpub" {
        exec = "est_robot_state_publisher -g";
        host = "$HOSTNAME_ROBOT";
    }
    cmd "r2l" {
        exec = "rosrun translators ros2lcm";
        host = "$HOSTNAME_ROBOT";
    }
    cmd "l2r" {
        exec = "rosrun translators lcm2ros -p";
        host = "$HOSTNAME_ROBOT";
    }
    cmd "j2f" {
        exec = "drc-joints2frames";
        host = "$HOSTNAME_ROBOT";
    }
    cmd "lidarfilt" {
        exec = "drc-lidar-passthrough";
        host = "$HOSTNAME_ROBOT";
    }
    cmd "netshaper" {
        exec = "drc-network-shaper -t manipulation -r robot";
        host = "$HOSTNAME_ROBOT";
    }
}

group "2.gazebo" {
    cmd "mit_manip" {
        exec = "roslaunch mit_drcsim_scripts atlas_test_world.launch gzworld:=$HOME/drc/ros_workspace/mit_drcsim_scripts/worlds/mit_manip.world";
        host = "localhost";
    }
    cmd "mit_walking" {
        exec = "roslaunch mit_drcsim_scripts atlas_test_world.launch gzworld:=$HOME/drc/ros_workspace/mit_drcsim_scripts/worlds/mit_walking.world";
        host = "localhost";
    }
    cmd "mit_driving" {
        exec = "roslaunch mit_drcsim_scripts atlas_test_world.launch gzworld:=$HOME/drc/ros_workspace/mit_drcsim_scripts/worlds/mit_driving.world";
        host = "localhost";
    }
    cmd "qual_manip" {
        exec = "roslaunch mit_drcsim_scripts atlas_test_world.launch gzworld:=/usr/local/share/drcsim-2.0/worlds/qual_task_2.world";
        host = "localhost";
    }
    cmd "qual_walking" {
        exec = "roslaunch mit_drcsim_scripts atlas_test_world.launch gzworld:=/usr/local/share/drcsim-2.0/worlds/qual_task_1.world";
        host = "localhost";
    }
}

group "3.a.motion_est"{
    cmd "estpub_sensing" {
        exec = "est_robot_state_publisher";
        host = "$HOSTNAME_ROBOT";
    }
    cmd "motion_vo" {
        exec = "drc-fovision-odometry -i 2";
        host = "$HOSTNAME_ROBOT";
    }
}

group "3.b.sensing" {
    cmd "icompress" {
        exec = "drc-image-tool";
        host = "$HOSTNAME_ROBOT";
    }
    cmd "maps-server" {
        exec = "maps-server";
        host = "$HOSTNAME_ROBOT";
    }
    cmd "aff_server" {
        exec = "affordance_server  -r robot";
        host = "$HOSTNAME_ROBOT";
    }
    cmd "data-request-server" {
        exec = "data-request-server";
        host = "$HOSTNAME_ROBOT";
    }
}

group "3.c.tracking" {
    cmd "stereo-bm" {
        exec = "stereo-bm";
        host = "$HOSTNAME_ROBOT";
    }
    cmd "imagemask" {
        exec = "drc-image-passthrough -o 1";
        host = "$HOSTNAME_ROBOT";
    }
    cmd "maskunzip" {
        exec = "drc-image-tool -m 1 -c CAMERALEFT_MASKZIPPED";
        host = "$HOSTNAME_ROBOT";
    }
}

group "4.drake_robot" {
    cmd "control_planner" {
        exec = "matlab";
        host = "$HOSTNAME_ROBOT";
    }
}

group "5.base" {
    cmd "netshaper" {
        exec = "drc-network-shaper -t manipulation -r base";
        host = "$HOSTNAME_BASE";
    }
    cmd "viewer" {
        exec = "drc-viewer  -r base -c drc_robot.cfg"; 
        host = "$HOSTNAME_BASE";
    }
    cmd "surrogate_viewer" {
        exec = "surrogate_viewer -r base";
        host = "$HOSTNAME_BASE";
    }
    cmd "modelpub" {
        exec = "robot_model_publisher -r base -u $HOME/drc/software/models/mit_gazebo_models/mit_robot_PnC/model.urdf";
        host = "$HOSTNAME_BASE";
    }
    cmd "aff_server" {
        exec = "affordance_server  -r base";
        host = "$HOSTNAME_BASE";
    }
    cmd "j2f" {
        exec = "drc-joints2frames -r base";
        host = "$HOSTNAME_BASE";
    }
    cmd "param_server" {
        exec = "bot-param-server drc_robot.cfg -l 'udpm://239.255.76.68:7668?ttl=0'";
        host = "$HOSTNAME_BASE";
    }
}

group "6.drake_base" {
    cmd "sticky_hands" {
       exec = "matlab -nosplash -nodesktop -r \"setenv('LCM_DEFAULT_URL','udpm://239.255.76.68:7668?ttl=0'); cd([getenv('DRC_PATH'),'/control/matlab/sticky_hands']); runGraspSynthesisPoolServer (4);\"";
       host = "$HOSTNAME_BASE";
    }
    cmd "footstep_planner" {
       exec = "matlab -nosplash -nodesktop -r \"setenv('LCM_DEFAULT_URL','udpm://239.255.76.68:7668?ttl=0'); cd([getenv('DRC_PATH'),'/control/matlab/footstep_planner']); runFootstepPlanner;\"";
       host = "$HOSTNAME_BASE";
    }
    cmd "base_planner" {
       exec = "matlab -r \"setenv('LCM_DEFAULT_URL','udpm://239.255.76.68:7668?ttl=0')\" ";
       host = "$HOSTNAME_BASE";
    }
}



group "robot.simple_control" {
    cmd "head_0" {
        exec = "rosrun tutorial_atlas_control traj_yaml.py $HOME/drc/ros_workspace/tutorial_atlas_control/scripts/Traj_data2.yaml  look_flat_hands_down";
        host = "$HOSTNAME_ROBOT";
    }
    cmd "head_45" {
        exec = "rosrun tutorial_atlas_control traj_yaml.py $HOME/drc/ros_workspace/tutorial_atlas_control/scripts/Traj_data2.yaml  look_part_down_hands_down";
        host = "$HOSTNAME_ROBOT";
    }
    cmd "head_90" {
        exec = "rosrun tutorial_atlas_control traj_yaml.py $HOME/drc/ros_workspace/tutorial_atlas_control/scripts/Traj_data2.yaml  look_full_down_hands_down";
        host = "$HOSTNAME_ROBOT";
    }
    cmd "hand_in_view" {
        exec = "rosrun tutorial_atlas_control traj_yaml.py $HOME/drc/ros_workspace/tutorial_atlas_control/scripts/Traj_data2.yaml  hand_in_view";
        host = "$HOSTNAME_ROBOT";
    }
    cmd "individual_joints" {
        exec = "rosrun tutorial_atlas_control traj_gui.py";
        host = "$HOSTNAME_ROBOT";
    }
}

group "robot.misc" {
    cmd "robot_spy" {
        exec = "bot-spy";
        host = "$HOSTNAME_ROBOT";
    }
    cmd "lcmscope" {
        exec = "drc-lcmscope";
        host = "$HOSTNAME_ROBOT";
    }
    cmd "teleop" {
        exec = "rosrun keyboard_teleop keyboard_teleop";
        host = "$HOSTNAME_ROBOT";
    }
    cmd "maskunzip" {
        exec = "drc-image-tool -m 1 -c CAMERALEFT_MASKZIPPED";
        host = "$HOSTNAME_ROBOT";
    }
    cmd "bandwidth-scope" {
        exec = "drc-bandwidth-scope";
        host = "$HOSTNAME_ROBOT";
    }
}

group "base.misc" {
    cmd "lcmscope" {
        exec = "drc-lcmscope";
        host = "$HOSTNAME_BASE";
    }
    cmd "base_spy" {
        exec = "bot-spy -l 'udpm://239.255.76.68:7668?ttl=0'";
        host = "$HOSTNAME_BASE";
    }
    cmd "bandwidth-scope" {
        exec = "drc-bandwidth-scope";
        host = "$HOSTNAME_BASE";
    }
}
group "robot.dev_tools" {
    cmd "teleport_to_steps" {
        exec = "rostopic pub /atlas/set_pose geometry_msgs/Pose '[-3.5, 12.5, 1.55]' '[0, 0, 0, 1]'";
        host = "$HOSTNAME_ROBOT";
    }
    cmd "oracle2coll" {
        exec = "drc-oracle2collection";
        host = "$HOSTNAME_ROBOT";
    }
}

script "startup simulation" {
    start group "core";
    start group "drake";
    wait ms 1000;
    start group "gazebo";
    wait ms 5000;
    start group "sensing";
}
