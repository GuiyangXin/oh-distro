   1               		.file	"watchdog.c"
   2               	__SREG__ = 0x3f
   3               	__SP_H__ = 0x3e
   4               	__SP_L__ = 0x3d
   5               	__CCP__ = 0x34
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.global __do_copy_data
   9               		.global __do_clear_bss
  11               		.text
  12               	.Ltext0:
 440               		.section	.text.WDT_EnableAndSetTimeout,"ax",@progbits
 442               	.global	WDT_EnableAndSetTimeout
 444               	WDT_EnableAndSetTimeout:
   1:watchdog.c    **** /************************************************************************/
   2:watchdog.c    **** /* XBoot Extensible AVR Bootloader                                      */
   3:watchdog.c    **** /*                                                                      */
   4:watchdog.c    **** /* Watchdog Module                                                      */
   5:watchdog.c    **** /*                                                                      */
   6:watchdog.c    **** /* watchdog.c                                                           */
   7:watchdog.c    **** /*                                                                      */
   8:watchdog.c    **** /* Alex Forencich <alex@alexforencich.com>                              */
   9:watchdog.c    **** /*                                                                      */
  10:watchdog.c    **** /* Copyright (c) 2010 Alex Forencich                                    */
  11:watchdog.c    **** /*                                                                      */
  12:watchdog.c    **** /* Permission is hereby granted, free of charge, to any person          */
  13:watchdog.c    **** /* obtaining a copy of this software and associated documentation       */
  14:watchdog.c    **** /* files(the "Software"), to deal in the Software without restriction,  */
  15:watchdog.c    **** /* including without limitation the rights to use, copy, modify, merge, */
  16:watchdog.c    **** /* publish, distribute, sublicense, and/or sell copies of the Software, */
  17:watchdog.c    **** /* and to permit persons to whom the Software is furnished to do so,    */
  18:watchdog.c    **** /* subject to the following conditions:                                 */
  19:watchdog.c    **** /*                                                                      */
  20:watchdog.c    **** /* The above copyright notice and this permission notice shall be       */
  21:watchdog.c    **** /* included in all copies or substantial portions of the Software.      */
  22:watchdog.c    **** /*                                                                      */
  23:watchdog.c    **** /* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,      */
  24:watchdog.c    **** /* EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF   */
  25:watchdog.c    **** /* MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND                */
  26:watchdog.c    **** /* NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS  */
  27:watchdog.c    **** /* BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN   */
  28:watchdog.c    **** /* ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN    */
  29:watchdog.c    **** /* CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE     */
  30:watchdog.c    **** /* SOFTWARE.                                                            */
  31:watchdog.c    **** /*                                                                      */
  32:watchdog.c    **** /************************************************************************/
  33:watchdog.c    **** 
  34:watchdog.c    **** #include "watchdog.h"
  35:watchdog.c    **** 
  36:watchdog.c    **** #ifdef __AVR_XMEGA__
  37:watchdog.c    **** 
  38:watchdog.c    **** void __attribute__ ((always_inline)) WDT_EnableAndSetTimeout( void )
  39:watchdog.c    **** {
 446               	.LM0:
 447               	.LFBB1:
 448               	/* prologue: function */
 449               	/* frame size = 0 */
 450               	/* stack size = 0 */
 451               	.L__stack_usage = 0
  40:watchdog.c    ****         uint8_t temp = WDT_ENABLE_bm | WDT_CEN_bm | WATCHDOG_TIMEOUT;
  41:watchdog.c    ****         CCP = CCP_IOREG_gc;
 453               	.LM1:
 454 0000 88ED      		ldi r24,lo8(-40)
 455 0002 84BF      		out 52-0,r24
  42:watchdog.c    ****         WDT.CTRL = temp;
 457               	.LM2:
 458 0004 8FE1      		ldi r24,lo8(31)
 459 0006 8093 8000 		sts 128,r24
 460               	.L2:
  43:watchdog.c    **** 
  44:watchdog.c    ****         /* Wait for WD to synchronize with new settings. */
  45:watchdog.c    ****         while(WDT_IsSyncBusy());
 462               	.LM3:
 463 000a 8091 8200 		lds r24,130
 464 000e 80FD      		sbrc r24,0
 465 0010 00C0      		rjmp .L2
 466               	/* epilogue start */
  46:watchdog.c    **** }
 468               	.LM4:
 469 0012 0895      		ret
 471               	.Lscope1:
 472               		.section	.text.WDT_Disable,"ax",@progbits
 474               	.global	WDT_Disable
 476               	WDT_Disable:
  47:watchdog.c    **** 
  48:watchdog.c    **** void __attribute__ ((always_inline)) WDT_Disable( void )
  49:watchdog.c    **** {
 478               	.LM5:
 479               	.LFBB2:
 480               	/* prologue: function */
 481               	/* frame size = 0 */
 482               	/* stack size = 0 */
 483               	.L__stack_usage = 0
  50:watchdog.c    ****         uint8_t temp = (WDT.CTRL & ~WDT_ENABLE_bm) | WDT_CEN_bm;
 485               	.LM6:
 486 0000 E0E8      		ldi r30,lo8(128)
 487 0002 F0E0      		ldi r31,hi8(128)
 488 0004 8081      		ld r24,Z
 489 0006 8C7F      		andi r24,lo8(-4)
 490 0008 8160      		ori r24,lo8(1)
  51:watchdog.c    ****         CCP = CCP_IOREG_gc;
 492               	.LM7:
 493 000a 98ED      		ldi r25,lo8(-40)
 494 000c 94BF      		out 52-0,r25
  52:watchdog.c    ****         WDT.CTRL = temp;
 496               	.LM8:
 497 000e 8083      		st Z,r24
 498               	/* epilogue start */
  53:watchdog.c    **** }
 500               	.LM9:
 501 0010 0895      		ret
 506               	.Lscope2:
 507               		.text
 509               	.Letext0:
DEFINED SYMBOLS
                            *ABS*:00000000 watchdog.c
     /tmp/ccrloPlH.s:2      *ABS*:0000003f __SREG__
     /tmp/ccrloPlH.s:3      *ABS*:0000003e __SP_H__
     /tmp/ccrloPlH.s:4      *ABS*:0000003d __SP_L__
     /tmp/ccrloPlH.s:5      *ABS*:00000034 __CCP__
     /tmp/ccrloPlH.s:6      *ABS*:00000000 __tmp_reg__
     /tmp/ccrloPlH.s:7      *ABS*:00000001 __zero_reg__
     /tmp/ccrloPlH.s:444    .text.WDT_EnableAndSetTimeout:00000000 WDT_EnableAndSetTimeout
     /tmp/ccrloPlH.s:476    .text.WDT_Disable:00000000 WDT_Disable

UNDEFINED SYMBOLS
__do_copy_data
__do_clear_bss
