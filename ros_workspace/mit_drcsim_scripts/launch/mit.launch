<launch>

<!-- what launch script to run: 
  run_gzserver", "run_gazebo" or "run_gazebo_paused" -->
  <arg name="gzname" default="run_gzserver"/>

<!-- Read world file -->
  <arg name="gzworld" default="$(find mit_drcsim_scripts)/worlds/mit_manip.world" />

  <param name="/use_sim_time" type="bool" value="true"/>
  <param name="/atlas/startup_mode" value="pinned" />
  <param name="/atlas/time_to_unpin" value="10" />

  <!-- start gazebo with the Atlas -->
<!--  <node name="gazebo" pkg="atlas_utils" type="$(arg gzname)" args="$(arg gzworld)" output="screen" />-->
  <node name="gazebo" pkg="mit_drcsim_scripts" type="$(arg gzname)" args="$(arg gzworld)" output="screen" /> 

  <!-- Robot Description -->
  <param name="robot_description" textfile="$(find mit_drcsim_scripts)/models/mit_robot/model.urdf"/>

  <rosparam file="$(find sandia_hand_description)/config/sandia_hand_gazebo_gains.yaml" ns="sandia_hands"/>

  <!-- launch some simple grasp controllers just for a strawman -->
  <node pkg="sandia_hand_teleop" type="simple_grasp.py" name="simple_grasp_left"  ns="sandia_hands/l_hand"/>
  <node pkg="sandia_hand_teleop" type="simple_grasp.py" name="simple_grasp_right" ns="sandia_hands/r_hand"/>


  <!-- additional nodes to publish joint states for the hands -->
  <node pkg="robot_state_publisher" type="state_publisher" name="sandia_hands_l_hand_robot_state_publisher">
    <param name="publish_frequency" type="double" value="200.0" /> <!-- changed from 50 to 200 -sk -->
    <remap from="joint_states" to="/sandia_hands/l_hand/joint_states" />
  </node>
  <node pkg="robot_state_publisher" type="state_publisher" name="sandia_hands_r_hand_robot_state_publisher">
    <param name="publish_frequency" type="double" value="200.0" /> <!-- changed from 50 to 200 -sk -->
    <remap from="joint_states" to="/sandia_hands/r_hand/joint_states" />
  </node>
  <node pkg="robot_state_publisher" type="state_publisher" name="atlas_robot_state_publisher">
    <param name="publish_frequency" type="double" value="200.0" /> <!-- changed from 50 to 200 -sk -->
    <remap from="joint_states" to="/atlas/joint_states" />
  </node>
  <node pkg="robot_state_publisher" type="state_publisher" name="multisense_sl_robot_state_publisher">
    <param name="publish_frequency" type="double" value="200.0" /> <!-- changed from 50 to 200 -sk -->
    <remap from="joint_states" to="/multisense_sl/joint_states" />
  </node>



  <!-- Stereo image processing -->
  <node ns="sandia_hands/l_hand/camera" name="stereo_proc" pkg="stereo_image_proc" type="stereo_image_proc" respawn="false" output="screen">
    <param name="disparity_range" type="int" value="128"/>
    <param name="approximate_sync" type="bool" value="false"/>
  </node>
  <node ns="sandia_hands/r_hand/camera" name="stereo_proc" pkg="stereo_image_proc" type="stereo_image_proc" respawn="false" output="screen">
    <param name="disparity_range" type="int" value="128"/>
    <param name="approximate_sync" type="bool" value="false"/>
  </node>
  <node ns="multisense_sl/camera" name="stereo_proc" pkg="stereo_image_proc" type="stereo_image_proc" respawn="false" output="screen">
    <param name="disparity_range" type="int" value="128"/>
    <param name="approximate_sync" type="bool" value="false"/>
  </node>
<!-- TF is not necessary-->
<!--  <node pkg="tf2_ros" type="buffer_server" name="tf2_buffer_server" output="screen">
    <param name="buffer_size" value="1200.0"/>
  </node>
-->

  <!-- Arms -->
  <rosparam command="load" file="$(find atlas_utils)/config/whole_body_trajectory_controller.yaml" />

</launch>

