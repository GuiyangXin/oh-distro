<launch>

  <arg name="gzname" default="gazebo"/>

  <!-- start gazebo with the DRC Robot -->
  <param name="/use_sim_time" type="bool" value="true"/>

  <!-- start gazebo with the DRC Robot -->
  <node name="gazebo" pkg="mit_drcsim_scripts" type="run_$(arg gzname)" args="$(find mit_drcsim_scripts)/worlds/mit_manipulation_task_pinned_robot.world"/>
<!--  <node name="gazebo" pkg="mit_drcsim_scripts" type="run_$(arg gzname)" args="$(find mit_drcsim_scripts)/worlds/mit_driving_task_wheeled_robot.world"/> -->

  <!-- Robot Description -->
  <param name="robot_description" textfile="$(find mit_drcsim_scripts)/models/mit_robot/model.urdf"/>


  <!-- Controller Manager -->
  <include file="$(find pr2_controller_manager)/controller_manager.launch" />

  <!-- Fake Calibration -->
  <node pkg="rostopic" type="rostopic" name="fake_joint_calibration"
        args="pub /calibrated std_msgs/Bool true" />

  <!-- TF Buffer Server -->
  <node pkg="tf2_ros" type="buffer_server" name="tf2_buffer_server" output="screen">
    <param name="buffer_size" value="1200.0"/>
  </node>

  <!-- Arms -->
<!-- original  
<rosparam command="load" file="$(find atlas)/ros/whole_body_trajectory_controller.yaml" /> 
-->

  <rosparam command="load" file="$(find mit_drcsim_scripts)/models/mit_robot/ros/whole_body_trajectory_controller.yaml" />

  <!-- Controllers that come up started -->
  <node name="atlas_controller_spawner"
        pkg="pr2_controller_manager" type="spawner" output="screen"
        args="--wait-for=/calibrated atlas_controller" />




<!-- Previous stuff before version drcsim1.3-jan -->
  <!-- Position Controllers -->
<!--  <rosparam file="$(find mit_drcsim_scripts)/models/mit_robot/ros/position_controllers.yaml" command="load" /> -->


</launch>
  

